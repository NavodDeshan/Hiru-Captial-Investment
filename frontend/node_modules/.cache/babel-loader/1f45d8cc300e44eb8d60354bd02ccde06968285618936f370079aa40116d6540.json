{"ast":null,"code":"import _objectSpread from\"D:/hiru/Hiru-Captial-Investment/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{Navigate}from'react-router-dom';import{jwtDecode}from'jwt-decode';// Correct import\nimport{jsx as _jsx}from\"react/jsx-runtime\";const withAdminAuth=WrappedComponent=>{return props=>{const token=localStorage.getItem('token');if(!token){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}try{const decoded=jwtDecode(token);if(decoded.role!=='admin'){return/*#__PURE__*/_jsx(Navigate,{to:\"/unauthorized\"});}}catch(error){return/*#__PURE__*/_jsx(Navigate,{to:\"/Login\"});}return/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({},props));};};export default withAdminAuth;","map":{"version":3,"names":["React","Navigate","jwtDecode","jsx","_jsx","withAdminAuth","WrappedComponent","props","token","localStorage","getItem","to","decoded","role","error","_objectSpread"],"sources":["D:/hiru/Hiru-Captial-Investment/frontend/src/pages/withAdminAuth.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { jwtDecode } from 'jwt-decode'; // Correct import\r\n\r\nconst withAdminAuth = (WrappedComponent) => {\r\n  return (props) => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      return <Navigate to=\"/login\" />;\r\n    }\r\n\r\n    try {\r\n      const decoded = jwtDecode(token);\r\n      if (decoded.role !== 'admin') {\r\n        return <Navigate to=\"/unauthorized\" />;\r\n      }\r\n    } catch (error) {\r\n      return <Navigate to=\"/Login\" />;\r\n    }\r\n\r\n    return <WrappedComponent {...props} />;\r\n  };\r\n};\r\n\r\nexport default withAdminAuth;"],"mappings":"6HAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,SAAS,KAAQ,YAAY,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,aAAa,CAAIC,gBAAgB,EAAK,CAC1C,MAAQ,CAAAC,KAAK,EAAK,CAChB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,mBAAOJ,IAAA,CAACH,QAAQ,EAACU,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjC,CAEA,GAAI,CACF,KAAM,CAAAC,OAAO,CAAGV,SAAS,CAACM,KAAK,CAAC,CAChC,GAAII,OAAO,CAACC,IAAI,GAAK,OAAO,CAAE,CAC5B,mBAAOT,IAAA,CAACH,QAAQ,EAACU,EAAE,CAAC,eAAe,CAAE,CAAC,CACxC,CACF,CAAE,MAAOG,KAAK,CAAE,CACd,mBAAOV,IAAA,CAACH,QAAQ,EAACU,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjC,CAEA,mBAAOP,IAAA,CAACE,gBAAgB,CAAAS,aAAA,IAAKR,KAAK,CAAG,CAAC,CACxC,CAAC,CACH,CAAC,CAED,cAAe,CAAAF,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}