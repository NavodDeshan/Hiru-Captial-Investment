{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sahiru\\\\Hiru-Captial-Investment\\\\frontend\\\\src\\\\pages\\\\UserDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios'; // Import axios for API requests\nimport './../css/UserDashboard.css'; // Ensure you have a CSS file for styling\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserDashboard = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate(); // For redirection\n\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      try {\n        // Retrieve id and token from local storage\n        const id = localStorage.getItem('id');\n        const token = localStorage.getItem('token');\n        console.log('Retrieved ID:', id); // Debugging: Check if ID is retrieved\n        console.log('Retrieved Token:', token); // Debugging: Check if Token is retrieved\n\n        if (!id || !token) {\n          setError('User ID or token not found. Redirecting to login...');\n          setLoading(false);\n          setTimeout(() => navigate('/'), 2000); // Redirect to login after 2 seconds\n          return;\n        }\n\n        // Fetch user profile using id\n        const response = await axios.get(`http://localhost:5000/api/users/user/profile/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}` // Include token in the request\n          }\n        });\n        console.log('User Profile Response:', response.data); // Debugging: Check API response\n        setUser(response.data); // Set the user data\n        setLoading(false); // Set loading to false\n      } catch (err) {\n        console.error('Error fetching user profile:', err); // Debugging: Log the error\n\n        if (err.response && err.response.status === 404) {\n          setError('User profile not found. Please check your account.');\n        } else if (err.response && err.response.status === 401) {\n          setError('Unauthorized. Please log in again.');\n          setTimeout(() => navigate('/'), 2000); // Redirect to login after 2 seconds\n        } else {\n          setError('Failed to fetch user profile. Please try again later.');\n        }\n        setLoading(false); // Set loading to false even if there's an error\n      }\n    };\n    fetchUserProfile();\n  }, [navigate]); // Include navigate in dependency array\n\n  const handleLogout = () => {\n    // Clear local storage\n    localStorage.removeItem('id');\n    localStorage.removeItem('token');\n    // Redirect to login page\n    navigate('/');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"User Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"User Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Username:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 12\n        }, this), \" \", user.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 12\n        }, this), \" \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Role:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 12\n        }, this), \" \", user.role]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-actions\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/AddLoan\",\n        className: \"user-action\",\n        children: \"Add Loans\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/AddPayment\",\n        className: \"user-action\",\n        children: \"Add Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(UserDashboard, \"A+zxRQsKGvnbF96Fwyr0cF3ZmVU=\", false, function () {\n  return [useNavigate];\n});\n_c = UserDashboard;\nexport default UserDashboard;\nvar _c;\n$RefreshReg$(_c, \"UserDashboard\");","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","axios","jsxDEV","_jsxDEV","UserDashboard","_s","user","setUser","loading","setLoading","error","setError","navigate","fetchUserProfile","id","localStorage","getItem","token","console","log","setTimeout","response","get","headers","Authorization","data","err","status","handleLogout","removeItem","children","fileName","_jsxFileName","lineNumber","columnNumber","className","username","email","role","to","_c","$RefreshReg$"],"sources":["D:/Sahiru/Hiru-Captial-Investment/frontend/src/pages/UserDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios'; // Import axios for API requests\r\nimport './../css/UserDashboard.css'; // Ensure you have a CSS file for styling\r\n\r\nconst UserDashboard = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate(); // For redirection\r\n\r\n  useEffect(() => {\r\n    const fetchUserProfile = async () => {\r\n      try {\r\n        // Retrieve id and token from local storage\r\n        const id = localStorage.getItem('id');\r\n        const token = localStorage.getItem('token');\r\n\r\n        console.log('Retrieved ID:', id); // Debugging: Check if ID is retrieved\r\n        console.log('Retrieved Token:', token); // Debugging: Check if Token is retrieved\r\n\r\n        if (!id || !token) {\r\n          setError('User ID or token not found. Redirecting to login...');\r\n          setLoading(false);\r\n          setTimeout(() => navigate('/'), 2000); // Redirect to login after 2 seconds\r\n          return;\r\n        }\r\n\r\n        // Fetch user profile using id\r\n        const response = await axios.get(`http://localhost:5000/api/users/user/profile/${id}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`, // Include token in the request\r\n          },\r\n        });\r\n\r\n        console.log('User Profile Response:', response.data); // Debugging: Check API response\r\n        setUser(response.data); // Set the user data\r\n        setLoading(false); // Set loading to false\r\n      } catch (err) {\r\n        console.error('Error fetching user profile:', err); // Debugging: Log the error\r\n\r\n        if (err.response && err.response.status === 404) {\r\n          setError('User profile not found. Please check your account.');\r\n        } else if (err.response && err.response.status === 401) {\r\n          setError('Unauthorized. Please log in again.');\r\n          setTimeout(() => navigate('/'), 2000); // Redirect to login after 2 seconds\r\n        } else {\r\n          setError('Failed to fetch user profile. Please try again later.');\r\n        }\r\n\r\n        setLoading(false); // Set loading to false even if there's an error\r\n      }\r\n    };\r\n\r\n    fetchUserProfile();\r\n  }, [navigate]); // Include navigate in dependency array\r\n\r\n  const handleLogout = () => {\r\n    // Clear local storage\r\n    localStorage.removeItem('id');\r\n    localStorage.removeItem('token');\r\n    // Redirect to login page\r\n    navigate('/');\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error-message\">Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-dashboard\">\r\n      <h1>User Dashboard</h1>\r\n\r\n      {/* User Profile Section */}\r\n      <div className=\"user-profile\">\r\n        <h2>User Profile</h2>\r\n        <p><strong>Username:</strong> {user.username}</p>\r\n        <p><strong>Email:</strong> {user.email}</p>\r\n        <p><strong>Role:</strong> {user.role}</p>\r\n      </div>\r\n\r\n      {/* User Actions Section */}\r\n      <div className=\"user-actions\">\r\n        <Link to=\"/AddLoan\" className=\"user-action\">Add Loans</Link>\r\n        <Link to=\"/AddPayment\" className=\"user-action\">Add Payment</Link>\r\n      </div>\r\n\r\n     \r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}